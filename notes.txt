
Feature request:
Given an origin y,x and a pointer to a frame, must display frame.
Display frame: Load a number og appropritate sprites (yxc) into SAT.

Arthur standing 0: 7 sprites, >> 1 sprite


  call test_size_in_my_frame



jp +  
.dstruct my_frame_1 frame 7 layout_1
layout_1:
    .db -24, -8, 1
    .db -24, 0, 2
    .db -16, -8, 3
    .db -16, 0, 4
    .db -8, -8, 5
    .db -8, 0, 6
    .db -32, -8, 7
+:
  ld hl,my_frame_1
  ld a,1 
  call get_sprite
  ASSERT_HL_EQUALS layout_1 + 3



Tests for the legacy animation struct

.org $1234
fake_animation_table:
    .db 7,
    .dw $1234,
    .db 0
    .db 0
    .dw $0123
    .dw $4567

    .db 6,
    .dw $5678,
    .db 0
    .db 0
    .dw $0123
    .dw $4567


dummy_animation:
  .db 4
  .dw $1111
  .db 9
  .db 9
  .dw $0123
  .dw $4567

ctable1:
  ; item 0
  .db 4
  .dw $1111
  .db 9
  .db 9
  .dw $0123
  .dw $4567
  ; item 1
  .db 5
  .dw $2222
  .db 10
  .db 10
  .dw $0123
  .dw $4567



call test_get_animation_0
call test_get_animation_1
call test_macro
call test_offset_custom_table_0_ctable1
call test_offset_custom_table_1_ctable1
call test_set_animation_load_dummy_to_index0
call test_set_animation_load_dummy_to_index1


test_get_animation_0:
  ld a,0
  call get_animation
  ld a,l
  ASSERT_A_EQUALS $34
ret

test_get_animation_1:
  ld a,1
  call get_animation
  ld a,l
  ASSERT_A_EQUALS $34+$9
ret

test_macro:
  ld hl,$1234
  ASSERT_HL_EQUALS $1234
ret

test_offset_custom_table_0_ctable1
  ld a,0
  ld b,9
  ld hl,ctable1
  call offset_custom_table
  ASSERT_HL_EQUALS ctable1
ret

test_offset_custom_table_1_ctable1
  ld a,1
  ld b,9
  ld hl,ctable1
  call offset_custom_table
  ASSERT_HL_EQUALS ctable1+9
  ld a,(hl)
  ASSERT_A_EQUALS 5
ret

test_set_animation_load_dummy_to_index0:
  ld a,0
  ld hl,dummy_animation
  call set_animation
  ld hl,animation_table
  ld a,(hl)
  ASSERT_A_EQUALS 4
ret

test_set_animation_load_dummy_to_index1:
  ld a,1
  ld hl,dummy_animation
  call set_animation
  ld hl,animation_table+9
  ld a,(hl)
  ASSERT_A_EQUALS 4
ret



  jp +
    ; Example offsetting
    ld d,0
    ld e,actor.id
    ld hl,arthur
    add hl,de
  
  +:

Index the animation table:
    ; index with following if not index = 0
    ; ld de,_sizeof_animation
    ; ld hl,animation_table
    ; ld b,a (index)
    ; -:
    ;   add hl,de
    ; djnz -



Vague initial requirement:
Write a library that can handle objects.

1. Add a metasprite to a given y,x